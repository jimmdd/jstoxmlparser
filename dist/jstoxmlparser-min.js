!function(e,t){if("function"==typeof define&&define.amd)define(["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.jstoxmlparser=n.exports}}(this,function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=["_selfCloseTag","_attrs"],o=new RegExp(r.join("|"),"g"),i=function(e){return(Array.isArray(e)?"array":"object"===(void 0===e?"undefined":n(e))&&null!==e&&e._name&&"special-object")||e instanceof Date&&"date"||null===e&&"null"||(void 0===e?"undefined":n(e))},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new RegExp("("+Object.keys(t).join("|")+")","g");return String(e).replace(n,function(e,n){return t[n]||""})},c=function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=[];n=Array.isArray(e)?e.map(function(e){var n=Object.keys(e)[0],r=e[n],o=t?a(r,t):r;return n+(!0===o?"":'="'+o+'"')}):Object.keys(e).map(function(n){var r=t?a(e[n],t):e[n];return n+(!0===e[n]?"":'="'+r+'"')});return n}(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments[1]);return 0===e.length?"":" "+e.join(" ")},u=["string","number","boolean"],s=function(e){return u.includes(i(e))},f=["object"],l=function(e){return f.includes(i(e))&&!Array.isArray(e)},d=[].concat(u,["date","special-object"]),v=e.toXML=function e(){var u,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},p=v.depth,y=void 0===p?0:p,b=v.indent,m=v._isFirstItem,h=(v._isLastItem,v.attributesFilter),g=v.header,_=v.filter,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.repeat(t)}(b,y),O=i(f),k=(u=f,d.includes(i(u))),A=0===y&&(k||!k&&m),x="";switch(O){case"special-object":var S=f._name,I=f._content;if(null===I){x=S;break}if(Array.isArray(I)&&(I.every(s)||I.every(l)))return I.map(function(n){return e({_name:S,_content:n},t({},v,{depth:y}))}).join("");if(S.match(o))break;var F=e(I,t({},v,{depth:y+1})),L=i(F),w=!F.match("<"),T=""+(b&&!A?"\n":"")+j,C="undefined"===L||""===F,E="boolean"===n(f._selfCloseTag)?C&&f._selfCloseTag:C,M=E?"/":"",P=c(f._attrs,h);x=""+T+("<"+S+P+M+">")+(E?"":""+F+(b&&!w?"\n"+j:"")+"</"+S+">");break;case"object":var R=Object.keys(f);x=R.map(function(n,o){var a=t({},v,{_isFirstItem:0===o,_isLastItem:o+1===R.length}),c={_name:n};if("object"===i(f[n])&&(r.forEach(function(e){var t=f[n][e];void 0!==t&&(c[e]=t,delete f[n][e])}),void 0!==f[n]._content&&Object.keys(f[n]).length>1)){var u=Object.assign({},f[n]);delete u._content,c._content=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map(function(t){return{_name:t,_content:e[t]}})}(u)),[f[n]._content])}return void 0===c._content&&(c._content=f[n]),e(c,a,n)},v).join("");break;case"function":var X=f(v);x=e(X,v);break;case"array":x=f.map(function(n,r){var o=t({},v,{_isFirstItem:0===r,_isLastItem:r+1===f.length});return e(n,o)}).join("");break;default:x=a(f,_)}return""+function(e){var t=e.header,r=e.indent,o=(e.depth,e.isOutputStart);return t&&o?("boolean"===(void 0===t?"undefined":n(t))?'<?xml version="1.0" encoding="UTF-8"?>':t)+(r?"\n":""):""}({header:g,indent:b,depth:y,isOutputStart:A})+x};e.default={toXML:v}});